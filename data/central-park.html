<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Greyhound Potree Viewer</title>

	<link rel="stylesheet" type="text/css" href="../build/potree/potree.css">
	<link rel="stylesheet" type="text/css" href="../libs/jquery-ui-1.11.4/jquery-ui.css">
	<link rel="stylesheet" type="text/css" href="../libs/perfect-scrollbar/css/perfect-scrollbar.css">
	<link rel="stylesheet" href="../libs/openlayers3/ol.css" type="text/css">
    <link rel="stylesheet" href="../css/entwine.css" type="text/css">
  </head>

  <body>
    <script type="text/javascript">
        window.config = {
            resource: 'nyc-z',
            material: 'Intensity',
            intensityGamma: 0.7,
            edlStrength: .2,
            pointBudget: 6 * 1000 * 1000,
            pointSize: 2.5,
            fov: 80,
            position: [ -8234641.52, 4977538.94, 653.04],
            target: [ -8234663.17, 4978050.99, 172.53],
            classificationFilter: [7]
        };
    </script>
	<script src="../libs/jquery/jquery-3.1.1.min.js" type="text/javascript"></script>
	<script
         src="../libs/perfect-scrollbar/js/perfect-scrollbar.jquery.js"
         type="text/javascript"></script>
	<script src="../libs/jquery-ui/jquery-ui.min.js" type="text/javascript"></script>
	<script src="../libs/three.js/build/three.js" type="text/javascript"></script>
	<script src="../libs/other/stats.min.js" type="text/javascript"></script>
	<script src="../libs/other/BinaryHeap.js" type="text/javascript"></script>
	<script src="../libs/tween/tween.min.js" type="text/javascript"></script>
	<script src="../libs/d3/d3.js" type="text/javascript"></script>
	<script src="../libs/proj4/proj4.js" type="text/javascript"></script>
	<script src="../libs/openlayers3/ol.js" type="text/javascript"></script>
    <script src="../libs/i18next/i18next.js" type="text/javascript"></script>
    <script src="../libs/clipboard.min.js" type="text/javascript"></script>
	<script src="../build/potree/potree.js" type="text/javascript"></script>

    <div id="potree_container">
        <a href="/" id="entwine_logo_container">
            <img id="entwine_logo" src="/resources/images/entwine-logo.png"/>
        </a>
        <img id="entwine_copy" src="/resources/icons/entwine-share.svg"
            title='Share a link with current view settings'
            onclick="$('#entwine_copied').show()"
            onmouseleave="$('#entwine_copied').hide()"
        />
        <div id="entwine_copied">Copied shareable link</div>
		<div id="potree_render_area">
			<img class="potree_menu_toggle"
                src="../resources/icons/menu_button.svg"
                onclick="viewer.toggleSidebar()"
            />
			<img id="potree_map_toggle"
                src="../resources/icons/map_icon.png"
                onclick="viewer.toggleMap()"
            />
			<div id="potree_map" class="mapBox">
                <div id="potree_map_header"></div>
				<div id="potree_map_content" class="map"></div>
			</div>
			<div id="potree_description" class="potree_info_text"></div>
		</div>
		<div id="potree_sidebar_container"></div>
    </div>
    <script type="text/javascript" src="script.js"></script>
    <script type="text/javascript">
        var Vec = (x, y, z) => {
            if (Array.isArray(x)) return new THREE.Vector3(x[0], x[1], x[2]);
            else return new THREE.Vector3(x, y, z);
        };
        var addAnnotation = (v) => {
            viewer.scene.addAnnotation(Vec(v.pos), {
                title: v.name,
                cameraPosition: Vec(v.cpos),
                cameraTarget: Vec(v.ctgt),
                actions: v.actions
            });
        };

        var a = {
            name: "",
            pos: [99999,99999,99999],
            cpos: [ -8234641.52, 4977538.94, 653.04],
            ctgt: [ -8234663.17, 4978050.99, 172.53],
        };
        var b = {
            name: "",
            pos: [99999,99999,99999],
            cpos: [ -8234543.18, 4975213.59, 2835.13],
            ctgt: [ -8234663.17, 4978050.99, 172.53]
        };
        var c = {
            name: "",
            pos: [99999,99999,99999],
            cpos: [ -8233996.05, 4962275.29, 14976.39],
            ctgt: [ -8234663.17, 4978050.99, 172.53]
        };
        var d = {
            name: "",
            pos: [99999,99999,99999],
            cpos: [-8232635.36, 4930098.59, 45170.90],
            ctgt: [-8234663.17, 4978050.99, 172.53],
        };
        addAnnotation(a);
        addAnnotation(b);
        addAnnotation(c);
        addAnnotation(d);

        var base = 25000;
        var step = 1350;
        setTimeout(() => {
            $(".annotation").eq(1).find("span").click();
        }, base + 0);
        setTimeout(() => {
            $(".annotation").eq(2).find("span").click();
        }, base + step);
        setTimeout(() => {
            $(".annotation").eq(3).find("span").click();
        }, base + step * 2);
        setTimeout(() => {
            $(".annotation").eq(2).find("span").click();
        }, base + step * 3);
        setTimeout(() => {
            $(".annotation").eq(1).find("span").click();
        }, base + step * 4);
        setTimeout(() => {
            $(".annotation").eq(0).find("span").click();
        }, base + step * 5);
    </script>
  </body>
</html>

