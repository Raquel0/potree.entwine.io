<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Greyhound Potree Viewer</title>

	<link rel="stylesheet" type="text/css" href="../build/potree/potree.css">
	<link rel="stylesheet" type="text/css" href="../libs/jquery-ui-1.11.4/jquery-ui.css">
	<link rel="stylesheet" type="text/css" href="../libs/perfect-scrollbar/css/perfect-scrollbar.css">
	<link rel="stylesheet" href="../libs/openlayers3/ol.css" type="text/css">
    <link rel="stylesheet" href="../css/entwine.css" type="text/css">
  </head>

  <body>
    <script type="text/javascript">
        window.config = {
            resource: 'dc',
            material: 'Intensity',
            pointSize: 2,
            edlStrength: .5,
            near: 50,
            far: 100000000,
            pointBudget: 3.5 * 1000 * 1000,
            position: [-8573921.09, 4705976.69, 509.47],
            target: [-8575182.46, 4705537.14, -327.02],
            elevationRange: [-20, 256]
        };
    </script>
	<script src="../libs/jquery/jquery-3.1.1.min.js" type="text/javascript"></script>
	<script
         src="../libs/perfect-scrollbar/js/perfect-scrollbar.jquery.js"
         type="text/javascript"></script>
	<script src="../libs/jquery-ui/jquery-ui.min.js" type="text/javascript"></script>
	<script src="../libs/three.js/build/three.js" type="text/javascript"></script>
	<script src="../libs/other/stats.min.js" type="text/javascript"></script>
	<script src="../libs/other/BinaryHeap.js" type="text/javascript"></script>
	<script src="../libs/tween/tween.min.js" type="text/javascript"></script>
	<script src="../libs/d3/d3.js" type="text/javascript"></script>
	<script src="../libs/proj4/proj4.js" type="text/javascript"></script>
	<script src="../libs/openlayers3/ol.js" type="text/javascript"></script>
    <script src="../libs/i18next/i18next.js" type="text/javascript"></script>
    <script src="../libs/clipboard.min.js" type="text/javascript"></script>
	<script src="../build/potree/potree.js" type="text/javascript"></script>

    <div id="potree_container">
        <a href="/" id="entwine_logo_container">
            <img id="entwine_logo" src="/resources/images/entwine-logo.png"/>
        </a>
        <img id="entwine_copy" src="/resources/icons/entwine-share.svg"
            title='Share a link with current view settings'
            onclick="$('#entwine_copied').show()"
            onmouseleave="$('#entwine_copied').hide()"
        />
        <div id="entwine_copied">Copied shareable link</div>
		<div id="potree_render_area">
			<img class="potree_menu_toggle"
                src="../resources/icons/menu_button.svg"
                onclick="viewer.toggleSidebar()"
            />
			<img id="potree_map_toggle"
                src="../resources/icons/map_icon.png"
                onclick="viewer.toggleMap()"
            />
			<div id="potree_map" class="mapBox">
                <div id="potree_map_header"></div>
				<div id="potree_map_content" class="map"></div>
			</div>
			<div id="potree_description" class="potree_info_text"></div>
		</div>
		<div id="potree_sidebar_container"></div>
    </div>
    <script type="text/javascript">
        new Clipboard('#entwine_copy', { text: () => window.captureUrl() });
    </script>

    <script type="text/javascript" src="script.js"></script>
    <script type="text/javascript">
        var Vec = (v) => new THREE.Vector3(v[0], v[1], v[2]);

        var annotations = [
            {
                name: "Jefferson Monument",
                pos: [-8575669.16, 4704690.21, 38.61],
                cpos: [-8575788.446519613,4704362.711468512,84.27199171679769],
                ctgt: [-8575197.864639096,4705489.284177702,-422.43310955067176]
            },
            {
                name: "The Watergate",
                pos: [-8577839.78, 4707346.63, 48.70],
                cpos: [-8577977.34065296,4707546.039383814,96.58984420352839],
                ctgt: [-8577847.382009216,4707369.424629578,64.84720805226945]
            },
            {
                name: "Verizon Center",
                pos: [-8573935, 4707090, 49],
                cpos: [-8573791.563063016,4707148.851692639,60.190875515029106],
                ctgt: [-8574031.125643624,4707013.872172069,8.638389727452214]
            },
            {
                name: "National Mall",
                pos: [-8575623.74, 4705840.88, 9.14],
                cpos: [-8575482.01, 4706337.65, 344.01],
                ctgt: [-8575591.32, 4705877.93, 61.66],
                actions: [{
                    icon: Potree.resourcePath + "/icons/profile.svg",
                    onclick: e => {
                        viewer.setMaterial("Elevation");
                        viewer.setElevationRange(-20, 200);
                    }
                },
                {
                    icon: "../resources/icons/rgb.png",
                    onclick: e => {
                        viewer.setMaterial("Intensity");
                    }
                }]
            }
        ];

        annotations.forEach((v) => viewer.scene.addAnnotation(
                    Vec(v.pos),
                    {
                        title: v.name,
                        cameraPosition: Vec(v.cpos),
                        cameraTarget: Vec(v.ctgt),
                        actions: v.actions
                    }));

        $(".annotation").last().find("img").css("filter", "invert(0)");
        $(".annotation-item").last().find("img").last().css("filter", "invert(0)");

        $("#menu_annotations").next().show();
    </script>
  </body>
</html>

